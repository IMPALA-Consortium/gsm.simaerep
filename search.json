[{"path":"https://impala-consortium.github.io/gsm.simaerep/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 IMPALA Consortium gsm.simaerep authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/articles/ContributorGuidelines.html","id":"branches","dir":"Articles","previous_headings":"","what":"Branches","title":"ContributorGuidelines","text":"core branches used repository : main: Contains production version package (protected). {issue#}: Contains code specific issue.","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/articles/ContributorGuidelines.html","id":"development-process","dir":"Articles","previous_headings":"","what":"Development Process","title":"ContributorGuidelines","text":"Describe development step github issue create new branch main named issue number prefix. Use Test-driven development (TDD) develop code. Write test first, write code pass test. github actions need pass merging code main branch.","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/articles/Cookbook.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Cookbook","text":"vignette contains sample code showing use gsm extension gsm.simaerep using sample data clindata. order familiarize gsm package, please refer gsm cookbook.","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/articles/Cookbook.html","id":"installation","dir":"Articles","previous_headings":"Introduction","what":"Installation","title":"Cookbook","text":"","code":"install.packages(\"pak\") pak::pak(\"Gilead-BioStats/clindata\") pak::pak(\"Gilead-BioStats/gsm\") pak::pak(\"IMPALA-Consortium/gsm.simaerep\")"},{"path":"https://impala-consortium.github.io/gsm.simaerep/articles/Cookbook.html","id":"load","dir":"Articles","previous_headings":"Introduction","what":"Load","title":"Cookbook","text":"","code":"suppressPackageStartupMessages(library(dplyr)) library(gsm.core) library(gsm.mapping) library(gsm.kri) library(gsm.reporting) library(gsm.simaerep)"},{"path":"https://impala-consortium.github.io/gsm.simaerep/articles/Cookbook.html","id":"gsm-simaerep-functions","dir":"Articles","previous_headings":"","what":"{gsm.simaerep} Functions","title":"Cookbook","text":"simaerep expects cumulative count numerator events per denominator event per subject input. example calculating cumulative AE count per visit per patient per site. Now can analyze data using Analyze_Simaerep() add flags Flag_Simaerep() adds Score -1 1. Positive values indicate -reporting probability negative values indicate -reporting probability. MetricExpected average simulated metric value site number patients identical number visits. Sites identical metric ratios can different expected metrics total number patients individual visit count varies. results compatible gsm package visualization. `simaerep scores represent related metric ratio use metric based threshold flagging. Therefore need calculate boundaries pass plotting function.","code":"dfInput <- Input_CumCount(   dfSubjects = clindata::rawplus_dm,   dfNumerator = clindata::rawplus_ae,   dfDenominator = clindata::rawplus_visdt %>% dplyr::mutate(visit_dt = lubridate::ymd(visit_dt)),   strSubjectCol = \"subjid\",   strGroupCol = \"siteid\",   strGroupLevel = \"Site\",   strNumeratorDateCol = \"aest_dt\",   strDenominatorDateCol = \"visit_dt\" )  dfInput %>%   dplyr::filter(max(Numerator) > 1, .by = \"SubjectID\") %>%   head(25) %>%   knitr::kable() dfAnalyzed <- Analyze_Simaerep(dfInput) dfFlagged <- Flag_Simaerep(dfAnalyzed, vThreshold = c(-0.99, -0.95, 0.95, 0.99)) #> ℹ Sorted dfFlagged using custom Flag order: 2.Sorted dfFlagged using custom Flag order: -2.Sorted dfFlagged using custom Flag order: 1.Sorted dfFlagged using custom Flag order: -1.Sorted dfFlagged using custom Flag order: 0.   dfFlagged %>%   arrange(Score) %>%   head(5) %>%   knitr::kable() dfFlagged %>%   arrange(Score) %>%   tail(5) %>%   knitr::kable() gsm.kri::Visualize_Scatter(   dfFlagged,   dfBounds = NULL,   strGroupLabel = \"GroupLevel\",   strUnit = \"Visits\" ) gsm.kri::Widget_ScatterPlot(   dfFlagged,   dfBounds = NULL ) gsm.kri::Widget_BarChart(   dfFlagged )"},{"path":"https://impala-consortium.github.io/gsm.simaerep/articles/Cookbook.html","id":"report-building","dir":"Articles","previous_headings":"","what":"Report Building","title":"Cookbook","text":"can create workflow create gsm KRI report.","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/articles/Cookbook.html","id":"mapping","dir":"Articles","previous_headings":"Report Building","what":"Mapping","title":"Cookbook","text":"","code":"lRaw <- list(   Raw_SUBJ = clindata::rawplus_dm,   Raw_AE = clindata::rawplus_ae,   Raw_VISIT = clindata::rawplus_visdt,   Raw_PD = clindata::ctms_protdev,   Raw_ENROLL = clindata::rawplus_enroll,   Raw_SITE = clindata::ctms_site %>%     rename(studyid = protocol) %>%     rename(invid = pi_number) %>%     rename(InvestigatorFirstName = pi_first_name) %>%     rename(InvestigatorLastName = pi_last_name) %>%     rename(City = city) %>%     rename(State = state) %>%     rename(Country = country) %>%     rename(Status = site_status),   Raw_STUDY = clindata::ctms_study %>%     rename(studyid = protocol_number) %>%     rename(Status = status) )  mapping_wf <- gsm.core::MakeWorkflowList(   strNames = NULL,   strPath = system.file(\"workflow/1_mappings\", package = \"gsm.simaerep\"),   strPackage = NULL )  lMapped <- gsm.core::RunWorkflows(lWorkflows = mapping_wf, lData = lRaw)"},{"path":"https://impala-consortium.github.io/gsm.simaerep/articles/Cookbook.html","id":"metrics","dir":"Articles","previous_headings":"Report Building","what":"Metrics","title":"Cookbook","text":"","code":"metrics_wf <- gsm.core::MakeWorkflowList(   strNames = NULL,   strPath = system.file(\"workflow/2_metrics\", package = \"gsm.simaerep\"),   strPackage = NULL )  lAnalyzed <- gsm.core::RunWorkflows(lWorkflows = metrics_wf, lData = lMapped)"},{"path":"https://impala-consortium.github.io/gsm.simaerep/articles/Cookbook.html","id":"report-generation---workflow","dir":"Articles","previous_headings":"Report Building","what":"Report Generation - Workflow","title":"Cookbook","text":"part identical gsm.","code":"reporting_wf <- gsm.core::MakeWorkflowList(strPath = \"workflow/3_reporting\", strPackage = \"gsm.reporting\")  lReport <- gsm.core::RunWorkflows(reporting_wf, c(lMapped, list(   lAnalyzed = lAnalyzed,   lWorkflows = metrics_wf )))  module_wf_gsm <- gsm.core::MakeWorkflowList(strPath = \"workflow/4_modules\", strPackage = \"gsm.kri\", strNames = \"report_kri_site.yaml\")  lModule <- gsm.core::RunWorkflows(module_wf_gsm, lReport) #> /opt/hostedtoolcache/pandoc/3.1.11/x64/pandoc +RTS -K512m -RTS /tmp/RtmpjtG2WG/Report_KRI.knit.md --to html4 --from markdown+autolink_bare_uris+tex_math_single_backslash --output /home/runner/work/gsm.simaerep/gsm.simaerep/vignettes/kri_report_AAAA0000000_Site_20250321.html --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/pagebreak.lua --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/latex-div.lua --embed-resources --standalone --variable bs3=TRUE --section-divs --table-of-contents --toc-depth 3 --variable toc_float=1 --variable toc_selectors=h1,h2,h3 --variable toc_smooth_scroll=1 --variable toc_print=1 --template /home/runner/work/_temp/Library/rmarkdown/rmd/h/default.html --no-highlight --variable highlightjs=1 --variable theme=bootstrap --css styles.css --include-in-header /tmp/RtmpjtG2WG/rmarkdown-str1e7a1f16dab2.html"},{"path":"https://impala-consortium.github.io/gsm.simaerep/articles/Cookbook.html","id":"report-generation---script","dir":"Articles","previous_headings":"Report Building","what":"Report Generation - Script","title":"Cookbook","text":"","code":"dfMetrics <- gsm.reporting::MakeMetric(lWorkflows = metrics_wf)  dfResults <- gsm.reporting::BindResults(   lAnalysis = lAnalyzed,   strName = \"Analysis_Summary\",   dSnapshotDate = Sys.Date(),   strStudyID = \"ABC-123\" )  dfGroups <- dplyr::bind_rows(   lMapped$Mapped_STUDY,   lMapped$Mapped_SITE,   lMapped$Country )  dfBounds <- gsm.reporting::MakeBounds(   dfResults = dfResults,   dfMetrics = dfMetrics )  lCharts <- gsm.kri::MakeCharts(   dfResults = dfResults %>%     filter(GroupLevel == \"Site\"),   dfMetrics = dfMetrics %>%     filter(GroupLevel == \"Site\"),   dfGroups = dfGroups,   dfBounds = dfBounds )  gsm.kri::Report_KRI(   lCharts = lCharts,   dfResults = dfResults,   dfGroups = dfGroups,   dfMetrics = dfMetrics,   strOutputFile = \"report_kri_site.html\" ) #> /opt/hostedtoolcache/pandoc/3.1.11/x64/pandoc +RTS -K512m -RTS /tmp/RtmpjtG2WG/Report_KRI.knit.md --to html4 --from markdown+autolink_bare_uris+tex_math_single_backslash --output /home/runner/work/gsm.simaerep/gsm.simaerep/vignettes/report_kri_site.html --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/pagebreak.lua --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/latex-div.lua --embed-resources --standalone --variable bs3=TRUE --section-divs --table-of-contents --toc-depth 3 --variable toc_float=1 --variable toc_selectors=h1,h2,h3 --variable toc_smooth_scroll=1 --variable toc_print=1 --template /home/runner/work/_temp/Library/rmarkdown/rmd/h/default.html --no-highlight --variable highlightjs=1 --variable theme=bootstrap --css styles.css --include-in-header /tmp/RtmpjtG2WG/rmarkdown-str1e7a4e7bd23e.html"},{"path":"https://impala-consortium.github.io/gsm.simaerep/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Björn Koneswarakantha. Author, maintainer.","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Koneswarakantha B (2025). gsm.simaerep: Add simaerep KRI gsm. R package version 0.0.2, https://impala-consortium.github.io/gsm.simaerep/.","code":"@Manual{,   title = {gsm.simaerep: Add simaerep KRI to gsm},   author = {Björn Koneswarakantha},   year = {2025},   note = {R package version 0.0.2},   url = {https://impala-consortium.github.io/gsm.simaerep/}, }"},{"path":"https://impala-consortium.github.io/gsm.simaerep/index.html","id":"gsmsimaerep","dir":"","previous_headings":"","what":"Add simaerep KRI to gsm","title":"Add simaerep KRI to gsm","text":"{simaerep} extension {gsm} package. package provides: gsm-style functions detailed : Input_CumCount() patient-level cumulative count source data Analyze_Simaerep() execute simaerep Flag_Simaerep() alias gsm.core::Flag required module configuration files: inst/workflow/1_mappings inst/workflow/2_metrics KRI: AE /- Reporting Probability PD /- Reporting Probability AE Z-Score PD Z-Score","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/index.html","id":"why-use-simaerep","dir":"","previous_headings":"","what":"Why use {simaerep}?","title":"Add simaerep KRI to gsm","text":"{simaerep} uses metric ratio detect /-reporting subject-related clinical events AEs. accounts sites different denominator counts similarly z-scores derived normal approximations funnel plots {gsm} standard. top {simaerep} considers changing event (numerator) probabilities time. advantage particularly important monitoring ongoing studies sites start enrolling patients different times. Typically event rates higher beginning study decrease time. {simaerep} can detect pattern adjust avoid comparing sites patients follow-sites many patients beginning treatment cycle. simulation experiment show {simaerep} outperforms z-scores event rates constant -time comparable event rates constant time see documentation. example report plots {simaerep} results onto familiar {gsm} scatter plots next z-score counter parts. can appreciate similarity results noticeable difference {simaerep} assigning greater scores allegedly -reporting sites. normal approximation produces negative lower boundaries lower denominator counts set zero, high z-scores associated high probabilities unobtainable regions. calibrated outlier probabilities obtained z-scores symmetric, site z-score 2 outlier probability site z-score -2. {simaerep} non-parametric provides realistic probabilities ranges denominator counts upper lower outliers. Resources: simaerep statistical performance Bootstrap Simulation Outlier Detection Operational Site Metrics Using Patient Reassignment PHUSE Paper, PHUSE Presentation Open-Source R Package Detection Adverse Events -Reporting Clinical Trials: Implementation Validation IMPALA (Inter coMPany quALity Analytics) Consortium","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Add simaerep KRI to gsm","text":"can install development version gsm.simaerep GitHub :","code":"# install.packages(\"remotes\") remotes::install_github(\"Gilead-BioStats/clindata\")  remotes::install_github(\"Gilead-BioStats/gsm.core@v1.0.0\") remotes::install_github(\"Gilead-BioStats/gsm.mapping@v1.0.0\") remotes::install_github(\"Gilead-BioStats/gsm.kri@v1.0.0\") remotes::install_github(\"Gilead-BioStats/gsm.reporting@v1.0.0\")  remotes::install_github(\"IMPALA-Consortium/gsm.simaerep\")"},{"path":"https://impala-consortium.github.io/gsm.simaerep/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"Add simaerep KRI to gsm","text":"detailed description see gsm.simaerep Cookbook","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Add simaerep KRI to gsm","text":"","code":"library(gsm.simaerep) library(gsm.kri)  dfInput <- Input_CumCount(   dfSubjects = clindata::rawplus_dm,   dfNumerator = clindata::rawplus_ae,   dfDenominator = clindata::rawplus_visdt %>% dplyr::mutate(visit_dt = lubridate::ymd(visit_dt)),   strSubjectCol = \"subjid\",   strGroupCol = \"siteid\",   strGroupLevel = \"Site\",   strNumeratorDateCol = \"aest_dt\",   strDenominatorDateCol = \"visit_dt\" )  dfAnalyzed <- Analyze_Simaerep(dfInput)  dfFlagged <- Flag_Simaerep(dfAnalyzed, vThreshold = c(-0.99, -0.95, 0.95, 0.99)) #> ℹ Sorted dfFlagged using custom Flag order: 2.Sorted dfFlagged using custom Flag order: -2.Sorted dfFlagged using custom Flag order: 1.Sorted dfFlagged using custom Flag order: -1.Sorted dfFlagged using custom Flag order: 0.  gsm.kri::Visualize_Scatter(   dfFlagged,   dfBounds = NULL,   strGroupLabel = \"GroupLevel\",   strUnit = \"Visits\" )"},{"path":"https://impala-consortium.github.io/gsm.simaerep/index.html","id":"sample-report","dir":"","previous_headings":"","what":"Sample Report","title":"Add simaerep KRI to gsm","text":"Sample Report","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/index.html","id":"quality-control","dir":"","previous_headings":"","what":"Quality Control","title":"Add simaerep KRI to gsm","text":"Since {gsm} designed use GCP framework, conducted extensive quality control part development process. particular, following early development: Unit Tests - Unit tests written core functions, 100% coverage required. Workflow Tests - Additional unit tests confirm core workflows behave expected. Function Documentation - Detailed documentation exported function examples maintained Roxygen. Package Checks - Standard package checks run using GitHub Actions must passing PRs merged. Continuous Integration - Continuous integration provided via GitHub Actions. Code Formatting - Code formatted {styler} release. Contributor Guidelines - Detailed contributor guidelines including step--step processes code development releases provided vignette. Code Demonstration - Cookbook Vignette provides demos explanations code usage.","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/index.html","id":"parking","dir":"","previous_headings":"Quality Control","what":"Parking","title":"Add simaerep KRI to gsm","text":"development progresses, also conduct following quality control steps: Qualification Workflow - assessments Qualified described Qualification Workflow Vignette. Qualification Report Vignette generated attached release. Code Review - Code review conducted using GitHub Pull Requests (PRs), log PRs included Qualification Report Vignette. Data Specifications - Machine-readable data specifications maintained KRIs. Specifications automatically added relevant function documentation. Regression Testing - Extensive QC testing done release.","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/AddGroupCol.html","id":null,"dir":"Reference","previous_headings":"","what":"Handle all dfSubjects operations, only if GroupID is not yet in Numerator or Denominator frames. Will also filter all events with no GroupID — AddGroupCol","title":"Handle all dfSubjects operations, only if GroupID is not yet in Numerator or Denominator frames. Will also filter all events with no GroupID — AddGroupCol","text":"Handle dfSubjects operations, GroupID yet Numerator Denominator frames. also filter events GroupID","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/AddGroupCol.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Handle all dfSubjects operations, only if GroupID is not yet in Numerator or Denominator frames. Will also filter all events with no GroupID — AddGroupCol","text":"","code":"AddGroupCol(df, dfSubjects, strSubjectCol, strGroupCol, strGroupLevel)"},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Analyze_Simaerep.html","id":null,"dir":"Reference","previous_headings":"","what":"Analyze Simaerep — Analyze_Simaerep","title":"Analyze Simaerep — Analyze_Simaerep","text":"Calculate -reporting probabilities numerator denominator ratio using simaerep::simaerep(). Uses inframe simaerep method apply multiplicity correction per latest recommendations. sum - reporting probability  per group usually zero, however simaerep::simaerep() adjusts edge cases group ratio expected ratio zero. combine metrics score 0 1, 0 -reporting 1 -reporting.","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Analyze_Simaerep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Analyze Simaerep — Analyze_Simaerep","text":"","code":"Analyze_Simaerep(dfInput, r = 1000)"},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Analyze_Simaerep.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Analyze Simaerep — Analyze_Simaerep","text":"dfInput data.frame returned Input_CumCount() r Integer tbl_object, number repetitions bootstrap simulation. Pass tbl object referring table one column many rows desired repetitions. Default: 1000.","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Analyze_Simaerep.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Analyze Simaerep — Analyze_Simaerep","text":"data.frame following specification:","code":""},{"path":[]},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Analyze_Simaerep.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Analyze Simaerep — Analyze_Simaerep","text":"","code":"# {clindata} Example for cumulative AE per Visit Count dfInput <- Input_CumCount(   dfSubjects = clindata::rawplus_dm,   dfNumerator = clindata::rawplus_ae,   dfDenominator = clindata::rawplus_visdt %>% dplyr::mutate(visit_dt = lubridate::ymd(visit_dt)),   strSubjectCol = \"subjid\",   strGroupCol = \"siteid\",   strGroupLevel = \"Site\",   strNumeratorDateCol = \"aest_dt\",   strDenominatorDateCol = \"visit_dt\" )  Analyze_Simaerep(dfInput) #> # A tibble: 176 × 9 #>    GroupID GroupLevel Numerator Denominator MetricExpected Metric #>    <chr>   <chr>          <dbl>       <dbl>          <dbl>  <dbl> #>  1 10      Site               8         390          0.162 0.0205 #>  2 100     Site               6          41          0.158 0.146  #>  3 101     Site               4          64          0.165 0.0625 #>  4 102     Site               8          69          0.178 0.116  #>  5 103     Site               8          86          0.163 0.0930 #>  6 104     Site              25         182          0.171 0.137  #>  7 105     Site              24          65          0.165 0.369  #>  8 106     Site               7          69          0.169 0.101  #>  9 107     Site              14          63          0.161 0.222  #> 10 109     Site               8          89          0.167 0.0899 #> # ℹ 166 more rows #> # ℹ 3 more variables: OverReportingProbability <dbl>, #> #   UnderReportingProbability <dbl>, Score <dbl>"},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Flag_Simaerep.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag_Simaerep — Flag_Simaerep","title":"Flag_Simaerep — Flag_Simaerep","text":"Alias gsm.core::Flag()","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Flag_Simaerep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag_Simaerep — Flag_Simaerep","text":"","code":"Flag_Simaerep(   dfAnalyzed,   strColumn = \"Score\",   vThreshold = c(-3, -2, 2, 3),   vFlag = c(-2, -1, 0, 1, 2),   vFlagOrder = c(2, -2, 1, -1, 0) )"},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Flag_Simaerep.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flag_Simaerep — Flag_Simaerep","text":"dfAnalyzed data.frame flags added. strColumn character Name column use thresholding. Default: \"Score\" vThreshold numeric Vector numeric values representing threshold values. Default c(-3,-2,2,3) typical z-scores. vFlag numeric Vector flag values. must one item Flag thresholds - length(vThreshold)+1 == length(vFlagValues). Default c(-2,-1,0,1,2), typical z-scores. vFlagOrder numeric Vector ordered flag values. Output data.frame sorted based flag column using order provided. NULL (values match vFlag) leave data unsorted. Must identical values vFlag. Default c(2,-2,1,-1,0) puts largest z-score outliers first data set.","code":""},{"path":[]},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Input_CumCount.html","id":null,"dir":"Reference","previous_headings":"","what":"Cumulative Numerator Event Count per Denominator Event Count — Input_CumCount","title":"Cumulative Numerator Event Count per Denominator Event Count — Input_CumCount","text":"Calculate subject level cumulative numerator event count per denominator event count. function takes list data frames including dfSUBJ, dfNumerator, dfDenominator, calculates subject level cumulative numerator count per cumulative denominator count. Numerator events two denominator events assigned later denominator event. Numerator events first denominator event assigned first denominator event. Numerator events last denominator event assigned last denominator event. numerator events fall day denominator event assigned event event date time columns imply numerator event occurred denominator. data requirements function follows: dfSubjects: data frame columns SubjectID relevant subject information dfNumerator: data frame column SubjectID strNumeratorCol strNumeratorMethod \"Sum\" dfDenominator: data frame column SubjectID strDenominatorCol strDenominatorMethod \"Sum\" columns dropped output data frame. GroupIDs added via dfSubjects present events without GroupID subjects without denominator numerator event dropped. Numerator events SubjectID GroupID can get assigned random enrolled subject GroupID","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Input_CumCount.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cumulative Numerator Event Count per Denominator Event Count — Input_CumCount","text":"","code":"Input_CumCount(   dfSubjects,   dfNumerator,   dfDenominator,   strGroupCol,   strGroupLevel = NULL,   strSubjectCol,   strNumeratorCol = NULL,   strDenominatorCol = NULL,   strNumeratorDateCol,   strDenominatorDateCol,   strOrphanedMethod = c(\"filter\", \"assign\") )"},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Input_CumCount.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cumulative Numerator Event Count per Denominator Event Count — Input_CumCount","text":"dfSubjects data.frame columns SubjectID relevant subject information dfNumerator data.frame column SubjectID strNumeratorDateCol dfDenominator data.frame column SubjectID strDenominatorDateCol strGroupCol character Column name dfSubjects use grouping. strGroupLevel character value group level. Default: NULL defaults strGroupCol strSubjectCol character Column name dfSubjects use subject ID. strNumeratorCol character Column name dfNumerator use numerator ID. Default: NULL strDenominatorCol character Column name dfDenominator use denominator ID. Default: NULL strNumeratorDateCol character Column name dfNumerator use numerator calculation. strDenominatorDateCol character Column name dfDenominator use denominator calculation. strOrphanedMethod character one_of(\"filter\", \"assign\") filter orphaned numerator events assign random patient enrolled site time event. Default: \"filter\"","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Input_CumCount.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cumulative Numerator Event Count per Denominator Event Count — Input_CumCount","text":"data.frame following specification:","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/Input_CumCount.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Cumulative Numerator Event Count per Denominator Event Count — Input_CumCount","text":"","code":"# dfSubjects tibble with one subject and one site dfSubjects <- tibble::tibble(   SubjectID = 1,   GroupID = 1 )  dfNumerator <- tibble::tibble(   SubjectID = rep(1, 10),   num_dt = as.Date(\"2000-01-01\") + c(months(0:4), rep(months(7), 2), months(9:11)), ) %>%   dplyr::mutate(     num_dt = num_dt + lubridate::hours(12)   )  # dfNumerator tibble with one subject 10 AEs, two of which on same day dfNumerator #> # A tibble: 10 × 2 #>    SubjectID num_dt              #>        <dbl> <dttm>              #>  1         1 2000-01-01 12:00:00 #>  2         1 2000-02-01 12:00:00 #>  3         1 2000-03-01 12:00:00 #>  4         1 2000-04-01 12:00:00 #>  5         1 2000-05-01 12:00:00 #>  6         1 2000-08-01 12:00:00 #>  7         1 2000-08-01 12:00:00 #>  8         1 2000-10-01 12:00:00 #>  9         1 2000-11-01 12:00:00 #> 10         1 2000-12-01 12:00:00  dfDenominator <- tibble::tibble(   SubjectID = rep(1, 4),   denom_dt = c(as.Date(c(\"2000-01-03\", \"2000-04-12\", \"2000-08-01\", \"2000-11-12\"))) ) %>%   dplyr::mutate(     denom_dt = denom_dt + lubridate::hours(1)   )  # dfDenominator tibble with one subject 4 visits, one on same day as two Numerator events # Denominator time indicates that they occurr before Numerator events dfDenominator #> # A tibble: 4 × 2 #>   SubjectID denom_dt            #>       <dbl> <dttm>              #> 1         1 2000-01-03 01:00:00 #> 2         1 2000-04-12 01:00:00 #> 3         1 2000-08-01 01:00:00 #> 4         1 2000-11-12 01:00:00   # numerator before first denominator rolls up to first denominator # numerator after last denominator rolls back to last denominator # two numerator events on 08-01 add to the 3rd denominator event on same day  Input_CumCount(   dfSubjects = dfSubjects,   dfNumerator = dfNumerator,   dfDenominator = dfDenominator,   strSubjectCol = \"SubjectID\",   strGroupCol = \"GroupID\",   strGroupLevel = \"Site\",   strNumeratorDateCol = \"num_dt\",   strDenominatorDateCol = \"denom_dt\" ) #> # A tibble: 4 × 5 #>   SubjectID GroupID GroupLevel Numerator Denominator #>       <dbl>   <dbl> <chr>          <dbl>       <dbl> #> 1         1       1 Site               1           1 #> 2         1       1 Site               4           2 #> 3         1       1 Site               7           3 #> 4         1       1 Site              10           4    # {clindata} Example for cumulative AE per Visit Count Input_CumCount(   dfSubjects = clindata::rawplus_dm,   dfNumerator = clindata::rawplus_ae,   dfDenominator = clindata::rawplus_visdt %>% dplyr::mutate(visit_dt = lubridate::ymd(visit_dt)),   strSubjectCol = \"subjid\",   strGroupCol = \"siteid\",   strGroupLevel = \"Site\",   strNumeratorDateCol = \"aest_dt\",   strDenominatorDateCol = \"visit_dt\" ) #> # A tibble: 28,074 × 5 #>    SubjectID GroupID GroupLevel Numerator Denominator #>    <chr>     <chr>   <chr>          <dbl>       <dbl> #>  1 0025      10      Site               0           1 #>  2 0025      10      Site               0           2 #>  3 0025      10      Site               0           3 #>  4 0025      10      Site               0           4 #>  5 0025      10      Site               0           5 #>  6 0025      10      Site               0           6 #>  7 0025      10      Site               0           7 #>  8 0025      10      Site               0           8 #>  9 0025      10      Site               0           9 #> 10 0025      10      Site               0          10 #> # ℹ 28,064 more rows"},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/gsm.simaerep-package.html","id":null,"dir":"Reference","previous_headings":"","what":"gsm.simaerep: What the Package Does (One Line, Title Case) — gsm.simaerep-package","title":"gsm.simaerep: What the Package Does (One Line, Title Case) — gsm.simaerep-package","text":"simaerep extension gsm package.","code":""},{"path":[]},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/gsm.simaerep-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"gsm.simaerep: What the Package Does (One Line, Title Case) — gsm.simaerep-package","text":"Maintainer: Björn Koneswarakantha bjoern.koneswarakantha@roche.com (ORCID)","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://impala-consortium.github.io/gsm.simaerep/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://impala-consortium.github.io/gsm.simaerep/news/index.html","id":"gsmsimaerep-002","dir":"Changelog","previous_headings":"","what":"gsm.simaerep 0.0.2","title":"gsm.simaerep 0.0.2","text":"switch gsm.core, gsm.mapping, gsm.kri, gsm.reporting","code":""}]
