<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>gsm.simaerep Details • gsm.simaerep</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="gsm.simaerep Details">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsm.simaerep</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/ContributorGuidelines.html">ContributorGuidelines</a></li>
    <li><a class="dropdown-item" href="../articles/Cookbook.html">Cookbook</a></li>
    <li><a class="dropdown-item" href="../articles/KRI.html">gsm.simaerep Details</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-sample-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Sample Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-sample-reports">
<li><a class="dropdown-item" href="../report_kri_site.html">Site Report</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>gsm.simaerep Details</h1>
            
      

      <div class="d-none name"><code>KRI.Rmd</code></div>
    </div>

    
    
<!-- chunk labels need to be unique to not get conflicts when rendering Rmd KRI report -->
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/clindata"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/gsm.core"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/gsm.mapping"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/gsm.kri"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"Gilead-BioStats/gsm.reporting"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"IMPALA-Consortium/gsm.simaerep"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="load">Load<a class="anchor" aria-label="anchor" href="#load"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gilead-biostats.github.io/gsm.core" class="external-link">gsm.core</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm.mapping" class="external-link">gsm.mapping</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Gilead-BioStats/gsm.kri" class="external-link">gsm.kri</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gilead-biostats.github.io/gsm.reporting/" class="external-link">gsm.reporting</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://impala-consortium.github.io/gsm.simaerep/">gsm.simaerep</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="simaerep-defaults">{simaerep} Defaults<a class="anchor" aria-label="anchor" href="#simaerep-defaults"></a>
</h2>
<ul>
<li>1000 replicates of bootstrap resampling iterations</li>
<li>By default were are using the thresholds 99%, 95% and do not apply
multiplicity correction</li>
<li>Events NA/NULL in numerator of denominator date columns will be
dropped</li>
<li>By default {gsm.simaerep} uses all denominator events. When visits
are used as denominator events filtering out unscheduled visits will
result in greater snychronisation of the visit counts which will be more
accurrate especially in small trials.</li>
</ul>
<p>A higher number of replicates will produce more stable results
especially for KRI based on low event counts such as treatment
discontinuations of which only a small fraction of patients will have at
most one event. <a href="https://github.com/IMPALA-Consortium/gsm.simaerep/blob/main/inst/workflow/2_metrics/kri0008.yaml" class="external-link">kri0008.yaml
Treatment Discontinuation</a> provides an example on how to change the
number of iterations.</p>
<p>Multiplicity Correction reduces the noise especially for trials with
a high number of sites and makes outliers stand out more. It is the
default setting for {simaerep} as results appear more plausible when
looking at a single study. However, the Benjamini-Hochberg procedure
eliminates small differences between the probability scores and assigns
shared ranks and identical scores to some of the sites. This makes
results less reproducible. On a portfolio level we have also observed a
small decrease in overall statistical performance when multiplicity
correction is used.</p>
<p>We recommend multiplicity correction if the purpose of the
probability scoring is to flag sites for visually inspection on a plot
displaying all sites of the study at once <a href="https://github.com/IMPALA-Consortium/gsm.simaerep/blob/main/inst/workflow/2_metrics/kri0006.yaml" class="external-link">kri0006.yaml
Treatment Discontinuation</a> demonstrates how to switch on the
multipicity correction. We advise to decrease the threshold to 95% and
75%. Increasing the number of bootstrap iterations will also help to get
more reproducible results.</p>
<p>When dropping of event with NA date values is not acceptable relevant
date imputation steps need to be added.</p>
</div>
<div class="section level2">
<h2 id="gsm-simaerep-preprocessing-options">{gsm.simaerep} Preprocessing Options<a class="anchor" aria-label="anchor" href="#gsm-simaerep-preprocessing-options"></a>
</h2>
<p><code><a href="../reference/Input_CumCount.html">Input_CumCount()</a></code> has some more complex built-in
pre-processing options that can handle special types of clinical events
that surpass the simple imputation of missing dates.</p>
<div class="section level3">
<h3 id="orphaned-clinical-events">Orphaned Clinical Events<a class="anchor" aria-label="anchor" href="#orphaned-clinical-events"></a>
</h3>
<p>Sometimes clinical events such as protocol deviations will be
assigned to a site but not to a subject. {simaerep} strictly requires
events to be assigned to a subject for including them in the
simulations.</p>
<p><code><a href="../reference/Input_CumCount.html">Input_CumCount()</a></code> can treat such events in two ways
either filter them (default) so that they are removed from the analysis
or assign them to a random patient that is enrolled at the site at the
time of the event.</p>
<p>However, we will only assign events that occurr between the first and
the last + 30 days denominator event on site.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># we create a Numerator dataframe with missing subjet id</span></span>
<span><span class="va">dfNumerator</span> <span class="op">&lt;-</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/ctms_protdev.html" class="external-link">ctms_protdev</a></span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>subjid <span class="op">=</span> <span class="va">subjectenrollmentnumber</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>    <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_dm.html" class="external-link">rawplus_dm</a></span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">subjid</span>, <span class="va">siteid</span><span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="st">"subjid"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">deviationdate</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">siteid</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># set 30% of subjectid per subject to NA</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rnk <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">subjid</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>subjid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">rnk</span> <span class="op">&lt;</span> <span class="fl">0.3</span>, <span class="cn">NA</span>, <span class="va">subjid</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">total_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">dfNumerator</span><span class="op">)</span></span>
<span></span>
<span><span class="va">total_events</span></span>
<span><span class="co">#&gt; [1] 1454</span></span>
<span></span>
<span><span class="va">linked_events</span> <span class="op">&lt;-</span> <span class="va">dfNumerator</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">subjid</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">linked_events</span></span>
<span><span class="co">#&gt; [1] 1188</span></span>
<span></span>
<span><span class="va">dfCumCount</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Input_CumCount.html">Input_CumCount</a></span><span class="op">(</span></span>
<span>    dfSubjects <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_dm.html" class="external-link">rawplus_dm</a></span>,</span>
<span>    dfNumerator <span class="op">=</span> <span class="va">dfNumerator</span>,</span>
<span>    dfDenominator <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_visdt.html" class="external-link">rawplus_visdt</a></span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>visit_dt <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="va">visit_dt</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    strSubjectCol <span class="op">=</span> <span class="st">"subjid"</span>,</span>
<span>    strGroupCol <span class="op">=</span> <span class="st">"siteid"</span>,</span>
<span>    strGroupLevel <span class="op">=</span> <span class="st">"Site"</span>,</span>
<span>    strNumeratorDateCol <span class="op">=</span> <span class="st">"deviationdate"</span>,</span>
<span>    strDenominatorDateCol <span class="op">=</span> <span class="st">"visit_dt"</span>,</span>
<span>    strOrphanedMethod <span class="op">=</span> <span class="st">"filter"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Denominator</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">Denominator</span><span class="op">)</span>, .by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">SubjectID</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">filtered_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">dfCumCount</span><span class="op">$</span><span class="va">Numerator</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">linked_events</span> <span class="op">==</span> <span class="va">filtered_events</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfCumCountOrphans</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Input_CumCount.html">Input_CumCount</a></span><span class="op">(</span></span>
<span>    dfSubjects <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_dm.html" class="external-link">rawplus_dm</a></span>,</span>
<span>    dfNumerator <span class="op">=</span> <span class="va">dfNumerator</span>,</span>
<span>    dfDenominator <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_visdt.html" class="external-link">rawplus_visdt</a></span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>visit_dt <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="va">visit_dt</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    strSubjectCol <span class="op">=</span> <span class="st">"subjid"</span>,</span>
<span>    strGroupCol <span class="op">=</span> <span class="st">"siteid"</span>,</span>
<span>    strGroupLevel <span class="op">=</span> <span class="st">"Site"</span>,</span>
<span>    strNumeratorDateCol <span class="op">=</span> <span class="st">"deviationdate"</span>,</span>
<span>    strDenominatorDateCol <span class="op">=</span> <span class="st">"visit_dt"</span>,</span>
<span>    strOrphanedMethod <span class="op">=</span> <span class="st">"assign"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Denominator</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">Denominator</span><span class="op">)</span>, .by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">SubjectID</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">assigned_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">dfCumCountOrphans</span><span class="op">$</span><span class="va">Numerator</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">assigned_events</span></span>
<span><span class="co">#&gt; [1] 1375</span></span>
<span></span>
<span><span class="va">filtered_events</span> <span class="op">/</span> <span class="va">total_events</span></span>
<span><span class="co">#&gt; [1] 0.8170564</span></span>
<span></span>
<span><span class="va">assigned_events</span> <span class="op">/</span> <span class="va">total_events</span></span>
<span><span class="co">#&gt; [1] 0.9456671</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="terminal-binary-events">Terminal Binary Events<a class="anchor" aria-label="anchor" href="#terminal-binary-events"></a>
</h3>
<p>Binary Events that can only occur once per patient and mark an early
drop out of the study can create a survivor bias when sampling
replacement patients.</p>
<p>It is recommended in this case to use planned visits as the
denominator instead of actual visits. However planned visits are not
often available, therefore <code><a href="../reference/Input_CumCount.html">Input_CumCount()</a></code> can attempt to
estimate planned visits.</p>
<p>It will try to rank regular visit instances using the subject-level
dates and determine the median time that has passed between them.</p>
<p>For this it will only consider visits that do not match a specific
SQL like pattern and which are recorded for a minimum ratio of
subjects.</p>
<p>Extrapolated visits that go beyond the last observed visit of
patients that did not discontinue will not be generated.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">dfDenominator</span> <span class="op">&lt;-</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_visdt.html" class="external-link">rawplus_visdt</a></span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>visit_dt <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="va">visit_dt</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfNumerator</span> <span class="op">&lt;-</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_studcomp.html" class="external-link">rawplus_studcomp</a></span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>mincreated_dts <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="va">mincreated_dts</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">vLikePatternInstanceName</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"%unsch%"</span>, <span class="st">"%disc%"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">strInstanceNameCol</span> <span class="op">&lt;-</span> <span class="st">"instancename"</span></span>
<span></span>
<span><span class="va">dfInputExtra</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Input_CumCount.html">Input_CumCount</a></span><span class="op">(</span></span>
<span>  dfSubjects <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_dm.html" class="external-link">rawplus_dm</a></span>,</span>
<span>  dfNumerator <span class="op">=</span> <span class="va">dfNumerator</span>,</span>
<span>  dfDenominator <span class="op">=</span> <span class="va">dfDenominator</span>,</span>
<span>  strGroupCol <span class="op">=</span> <span class="st">"siteid"</span>,</span>
<span>  strSubjectCol <span class="op">=</span> <span class="st">"subjid"</span>,</span>
<span>  strGroupLevel <span class="op">=</span> <span class="st">"Site"</span>,</span>
<span>  strNumeratorDateCol <span class="op">=</span> <span class="st">"mincreated_dts"</span>,</span>
<span>  strDenominatorDateCol <span class="op">=</span> <span class="st">"visit_dt"</span>,</span>
<span>  vLikePatternInstanceName <span class="op">=</span> <span class="va">vLikePatternInstanceName</span>,</span>
<span>  strInstanceNameCol <span class="op">=</span> <span class="va">strInstanceNameCol</span>,</span>
<span>  nMinSubjectRatioInstance <span class="op">=</span> <span class="fl">0.7</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfInputRegular</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Input_CumCount.html">Input_CumCount</a></span><span class="op">(</span></span>
<span>  dfSubjects <span class="op">=</span> <span class="fu">clindata</span><span class="fu">::</span><span class="va"><a href="https://gilead-biostats.github.io/clindata/reference/rawplus_dm.html" class="external-link">rawplus_dm</a></span>,</span>
<span>  dfNumerator <span class="op">=</span> <span class="va">dfNumerator</span>,</span>
<span>  dfDenominator <span class="op">=</span> <span class="va">dfDenominator</span>,</span>
<span>  strGroupCol <span class="op">=</span> <span class="st">"siteid"</span>,</span>
<span>  strSubjectCol <span class="op">=</span> <span class="st">"subjid"</span>,</span>
<span>  strGroupLevel <span class="op">=</span> <span class="st">"Site"</span>,</span>
<span>  strNumeratorDateCol <span class="op">=</span> <span class="st">"mincreated_dts"</span>,</span>
<span>  strDenominatorDateCol <span class="op">=</span> <span class="st">"visit_dt"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">dfInputRegular</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SubjectID</span> <span class="op">==</span> <span class="st">"0002"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">SubjectID</th>
<th align="left">GroupID</th>
<th align="left">GroupLevel</th>
<th align="right">Numerator</th>
<th align="right">Denominator</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">0</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">0</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">dfInputExtra</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SubjectID</span> <span class="op">==</span> <span class="st">"0002"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">SubjectID</th>
<th align="left">GroupID</th>
<th align="left">GroupLevel</th>
<th align="right">Numerator</th>
<th align="right">Denominator</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">0</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">16</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">17</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">19</td>
</tr>
<tr class="even">
<td align="left">0002</td>
<td align="left">76</td>
<td align="left">Site</td>
<td align="right">1</td>
<td align="right">20</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Björn Koneswarakantha.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
